{"version":3,"sources":["webpack:///./__fixtures__/empty.scss?bf17","webpack:///./__fixtures__/empty.scss?95cf","webpack:///./__fixtures__/empty.scss","webpack:///./template/js/lib/load-widgets.js"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","isCheckout","window","location","pathname","startsWith","widgetsLoadPromises","widgetsMsDelay","hostname","loadWidget","pkg","runImport","waitWidgetResolve","Promise","resolve","setTimeout","widget","_widgets","active","desktopOnly","isMobile","enableCheckout","disablePages","then","exp","options","emitter","emit","console","log","catch","error","finally","resource","document","body","dataset","all","widgetProductCard","getElementById","requestIdleCallback","fn"],"mappings":"8FAAA,Q,oBCGA,IAAIA,EAAU,EAAQ,KACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,KAA4DL,SAC7D,WAAYF,GAAS,EAAM,K,qBCP5CM,EADkC,EAAQ,IAChCE,EAA4B,IAE9BC,KAAK,CAACN,EAAOC,EAAI,GAAI,KAE7BD,EAAOG,QAAUA,G,iCCNjB,mCAIA,MAAMI,EAAaC,OAAOC,SAASC,SAASC,WAAW,SACjDC,EAAsB,GACtBC,EAA8C,cAA7BL,OAAOC,SAASK,SAA2B,GAAK,EAEjEC,EAAa,CAACC,EAAKC,KACvB,MAAMC,EAAoB,IAAIC,SAAQC,IACpCC,YAAW,KACT,MAAMC,EAASd,OAAOe,UAAYf,OAAOe,SAASP,GAClD,GACEM,GACAA,EAAOE,UACLF,EAAOG,cAAgBC,cACxBnB,EAAae,EAAOK,gBAAkBL,EAAOM,cAE9C,OAAOX,IACJY,MAAKC,IACuB,mBAAhBA,EAAI/B,SACb+B,EAAI/B,QAAQuB,EAAOS,SAErBC,IAAQC,KAAM,UAASjB,KACvBkB,QAAQC,IAAK,kBAAiBnB,QAE/BoB,MAAMF,QAAQG,OACdC,QAAQlB,GAGbA,MACCP,MAGLD,EAAoBN,KAAKY,KAGrB,SAAEqB,GAAaC,SAASC,KAAKC,QAC9BnC,GAA2B,aAAbgC,GACjBxB,EACE,4BACA,IAAM,qEAIVI,QAAQwB,IAAI/B,GAAqBiB,MAAK,KACpCd,EACE,iCACA,IAAMI,QAAQC,QAAQ,CAAErB,QAAS6C,SAIJ,YAA7BpC,OAAOC,SAASC,UACH,eAAb6B,GACa,WAAbA,IACEA,GAAYC,SAASK,eAAe,mBAEtC9B,EACE,kCACA,IAAM,uDAIV,MAAM+B,EAAsBC,IACgB,mBAA/BvC,OAAOsC,oBAChBzB,YAAW,IAAMb,OAAOsC,oBAAoBC,IAAK,KAEjD1B,WAAW0B,EAAI,MAInBD,GAAoB,KAClBd,IAAQC,KAAK,YAER1B,IACHQ,EACE,2BACA,IAAM,uDAERA,EACE,6BACA,IAAM,iCAERA,EACE,yBACA,IAAM,kCAIVI,QAAQwB,IAAI/B,GAAqBiB,MAAK,KACpCiB,GAAoB,IAAMd,IAAQC,KAAK,qBAEvClB,EACE,gCACA,IAAM,iCAERA,EACE,8BACA,IAAM,iCAERA,EACE,6BACA,IAAM,iCAERA,EACE,gCACA,IAAM,iCAERA,EACE,yBACA,IAAM,iCAERA,EACE,kCACA,IAAM,4C","file":"chunk.72f0485f479347cfe16b.js","sourcesContent":["export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--0-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/resolve-url-loader/index.js??ref--0-oneOf-0-2!../node_modules/postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../node_modules/sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./empty.scss?vue&type=style&index=0&lang=scss&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--0-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/resolve-url-loader/index.js??ref--0-oneOf-0-2!../node_modules/postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../node_modules/sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./empty.scss?vue&type=style&index=0&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"444d28a4\", content, true, {});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { isMobile } from '@ecomplus/storefront-twbs'\nimport emitter from './emitter'\nimport widgetProductCard from '@ecomplus/widget-product-card'\n\nconst isCheckout = window.location.pathname.startsWith('/app/')\nconst widgetsLoadPromises = []\nconst widgetsMsDelay = window.location.hostname === 'localhost' ? 50 : 1\n\nconst loadWidget = (pkg, runImport) => {\n  const waitWidgetResolve = new Promise(resolve => {\n    setTimeout(() => {\n      const widget = window._widgets && window._widgets[pkg]\n      if (\n        widget &&\n        widget.active &&\n        (!widget.desktopOnly || !isMobile) &&\n        (isCheckout ? widget.enableCheckout : !widget.disablePages)\n      ) {\n        return runImport()\n          .then(exp => {\n            if (typeof exp.default === 'function') {\n              exp.default(widget.options)\n            }\n            emitter.emit(`widget:${pkg}`)\n            console.log(`Widget loaded: ${pkg}`)\n          })\n          .catch(console.error)\n          .finally(resolve)\n      }\n\n      resolve()\n    }, widgetsMsDelay)\n  })\n\n  widgetsLoadPromises.push(waitWidgetResolve)\n}\n\nconst { resource } = document.body.dataset\nif (!isCheckout && resource === 'products') {\n  loadWidget(\n    '@ecomplus/widget-product',\n    () => import(/* webpackPrefetch: true */ '@ecomplus/widget-product')\n  )\n}\n\nPromise.all(widgetsLoadPromises).then(() => {\n  loadWidget(\n    '@ecomplus/widget-product-card',\n    () => Promise.resolve({ default: widgetProductCard })\n  )\n\n  if (\n    window.location.pathname === '/search' ||\n    resource === 'categories' ||\n    resource === 'brands' ||\n    (!resource && document.getElementById('search-engine'))\n  ) {\n    loadWidget(\n      '@ecomplus/widget-search-engine',\n      () => import(/* webpackPrefetch: true */ '@ecomplus/widget-search-engine')\n    )\n  }\n\n  const requestIdleCallback = fn => {\n    if (typeof window.requestIdleCallback === 'function') {\n      setTimeout(() => window.requestIdleCallback(fn), 200)\n    } else {\n      setTimeout(fn, 800)\n    }\n  }\n\n  requestIdleCallback(() => {\n    emitter.emit('load:lcp')\n\n    if (!isCheckout) {\n      loadWidget(\n        '@ecomplus/widget-search',\n        () => import('@ecomplus/widget-search')\n      )\n      loadWidget(\n        '@ecomplus/widget-minicart',\n        () => import('@ecomplus/widget-minicart')\n      )\n      loadWidget(\n        '@ecomplus/widget-user',\n        () => import('@ecomplus/widget-user')\n      )\n    }\n\n    Promise.all(widgetsLoadPromises).then(() => {\n      requestIdleCallback(() => emitter.emit('load:components'))\n\n      loadWidget(\n        '@ecomplus/widget-tag-manager',\n        () => import('@ecomplus/widget-tag-manager')\n      )\n      loadWidget(\n        '@ecomplus/widget-analytics',\n        () => import('@ecomplus/widget-analytics')\n      )\n      loadWidget(\n        '@ecomplus/widget-fb-pixel',\n        () => import('@ecomplus/widget-fb-pixel')\n      )\n      loadWidget(\n        '@ecomplus/widget-gmc-ratings',\n        () => import('@ecomplus/widget-gmc-ratings')\n      )\n      loadWidget(\n        '@ecomplus/widget-ebit',\n        () => import('@ecomplus/widget-ebit')\n      )\n      loadWidget(\n        '@ecomplus/widget-compre-confie',\n        () => import('@ecomplus/widget-compre-confie')\n      )\n    })\n  })\n})\n"],"sourceRoot":""}