{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-product/src/index.js"],"names":["options","elId","$productBlock","document","getElementById","$dock","isSSR","Boolean","storefront","window","getScopedSlots","body","context","vueOptions","render","h","TheProduct","attrs","id","props","product","available","checkInStock","buyText","scopedSlots","Object","assign","buy","undefined","domProps","innerHTML","removeSpinner","$loading","remove","dataset","toRender","mounted","on","Vue","$mount"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEe,gEAACA,OAAO,GAAG,EAAX,EAAeC,IAAI,GAAG,SAAtB,KAAoC;AACjD,QAAMC,aAAa,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,IAAxB,CAAtB;;AACA,MAAIC,aAAJ,EAAmB;AACjB,UAAMG,KAAK,GAAGF,QAAQ,CAACC,cAAT,CAAyB,GAAEH,IAAK,OAAhC,CAAd;AACA,UAAMK,KAAK,GAAGC,OAAO,CAACF,KAAD,CAArB;AACA,UAAM;AAAEG;AAAF,QAAiBC,MAAvB;AACA,QAAIC,cAAJ,EAAoBC,IAApB;;AACA,QAAIH,UAAJ,EAAgB;AACdE,oBAAc,GAAGF,UAAU,CAACE,cAA5B;AACAC,UAAI,GAAGH,UAAU,CAACI,OAAX,IAAsBJ,UAAU,CAACI,OAAX,CAAmBD,IAAhD;AACD;;AAED,UAAME,UAAU,GAAG;AACjBC,YAAM,EAAEC,CAAC,IAAIA,CAAC,CAACC,kEAAD,EAAa;AACzBC,aAAK,EAAE;AACLC,YAAE,EAAEb,KAAK,GAAG,IAAH,GAAUJ;AADd,SADkB;AAIzBkB,aAAK,EAAE,EACL,GAAGnB,OAAO,CAACmB,KADN;AAELC,iBAAO,EAAEd,KAAK,IAAIK,IAAT,IAAiBA,IAAI,CAACU,SAAtB,IAAmCC,+DAAY,CAACX,IAAD,CAA/C,GAAwDA,IAAxD,GAA+D,IAFnE;AAGLY,iBAAO,EAAEvB,OAAO,CAACuB,OAHZ;AAILjB;AAJK,SAJkB;AAWzBkB,mBAAW,EAAEC,MAAM,CAACC,MAAP,CACX;AACEC,aAAG,EAAE,CAAC3B,OAAO,CAAC2B,GAAT,GACDC,SADC,GAED,YAAY;AACZ,mBAAOb,CAAC,CAAC,MAAD,EAAS;AACfc,sBAAQ,EAAE;AACRC,yBAAS,EAAE9B,OAAO,CAAC2B;AADX;AADK,aAAT,CAAR;AAKD;AATL,SADW,EAYX,OAAOjB,cAAP,KAA0B,UAA1B,GACIA,cAAc,CAACR,aAAD,EAAgBa,CAAhB,EAAmB,CAACV,KAApB,CADlB,GAEI,EAdO;AAXY,OAAb;AADG,KAAnB;;AA+BA,UAAM0B,aAAa,GAAG,MAAM;AAC1B,YAAMC,QAAQ,GAAG7B,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAjB;;AACA,UAAI4B,QAAJ,EAAc;AACZA,gBAAQ,CAACC,MAAT;AACD;;AACD,aAAO/B,aAAa,CAACgC,OAAd,CAAsBC,QAA7B;AACD,KAND;;AAOA,QAAI7B,KAAJ,EAAW;AACTO,gBAAU,CAACuB,OAAX,GAAqBL,aAArB;AACD,KAFD,MAEO;AACLlB,gBAAU,CAACC,MAAX,CAAkBuB,EAAlB,GAAuB;AACrB,0BAAkBN;AADG,OAAvB;AAGD;;AAED,QAAIO,2CAAJ,CAAQzB,UAAR,EAAoB0B,MAApB,CAA2BlC,KAAK,IAAIH,aAApC;AACD;AACF,CA5DD,E","file":"chunk.097207dd7f6c60302844.js","sourcesContent":["/*!\n * @ecomplus/widget-product\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport Vue from 'vue'\nimport { inStock as checkInStock } from '@ecomplus/utils'\nimport TheProduct from '#components/TheProduct.vue'\n\nexport default (options = {}, elId = 'product') => {\n  const $productBlock = document.getElementById(elId)\n  if ($productBlock) {\n    const $dock = document.getElementById(`${elId}-dock`)\n    const isSSR = Boolean($dock)\n    const { storefront } = window\n    let getScopedSlots, body\n    if (storefront) {\n      getScopedSlots = storefront.getScopedSlots\n      body = storefront.context && storefront.context.body\n    }\n\n    const vueOptions = {\n      render: h => h(TheProduct, {\n        attrs: {\n          id: $dock ? null : elId\n        },\n        props: {\n          ...options.props,\n          product: isSSR && body && body.available && checkInStock(body) ? body : null,\n          buyText: options.buyText,\n          isSSR\n        },\n\n        scopedSlots: Object.assign(\n          {\n            buy: !options.buy\n              ? undefined\n              : function () {\n                return h('span', {\n                  domProps: {\n                    innerHTML: options.buy\n                  }\n                })\n              }\n          },\n          typeof getScopedSlots === 'function'\n            ? getScopedSlots($productBlock, h, !$dock)\n            : {}\n        )\n      })\n    }\n\n    const removeSpinner = () => {\n      const $loading = document.getElementById('product-loading')\n      if ($loading) {\n        $loading.remove()\n      }\n      delete $productBlock.dataset.toRender\n    }\n    if (isSSR) {\n      vueOptions.mounted = removeSpinner\n    } else {\n      vueOptions.render.on = {\n        'update:product': removeSpinner\n      }\n    }\n\n    new Vue(vueOptions).$mount($dock || $productBlock)\n  }\n}\n"],"sourceRoot":""}