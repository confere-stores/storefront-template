{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-search-engine/src/index.js","webpack:///./node_modules/@linusborg/vue-simple-portal/dist/index.esm.js","webpack:///./node_modules/nanoid/non-secure/index.js"],"names":["options","elId","paginationElId","$searchEngine","document","getElementById","$dock","$productItems","getScopedSlots","window","storefront","dataset","urlParams","URLSearchParams","location","search","props","term","get","brands","getAll","categories","defaultFilters","reduce","filters","gridAndOption","gridId","option","split","push","defaultSort","sort","forEach","resource","JSON","parse","err","console","error","length","charAt","toUpperCase","slice","hasPopularItems","body","Error","pageTitle","title","updatePageUrl","page","history","query","toString","pathname","pushState","vueApp","Vue","data","countRequests","canShowItems","parseInt","totalItems","render","createElement","vm","pagination","then","h","default","on","set","scroll","top","behavior","$mount","SearchEngine","attrs","id","canLoadMore","disableLoadMore","loadMoreSelector","isFilterable","disableFilters","fetch","ecomSearch","fetching","isPopularItems","result","getTotalCount","renderNewItems","$","remove","hits","isSameItems","i","find","_id","scopedSlots","undefined","append","mount","observer","MutationObserver","clearTimeout","fallbackTimer","disconnect","setTimeout","observe","childList"],"mappings":"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ACmB,MAAP,CAAcvE,aAAd;AACD;AACF;AACF,CAtMD,E;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACsB;AACqB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wCAAwC,gEAAM;AAC9C;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,2CAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;AAED,aAAa,2CAAG;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,kEAAkE,2CAAG;AACrE;AACA,EAAE,2CAAG;AACL;;AAEe,sEAAO,EAAC;AACgB;;;;;;;;;;;;;AClLvC;AAAA;AAAA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,UAAU;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEiC","file":"chunk.4d450959769b65382e86.js","sourcesContent":["/*!\n * @ecomplus/widget-search-engine\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport { $ } from '@ecomplus/storefront-twbs'\nimport Vue from 'vue'\nimport SearchEngine from '#components/SearchEngine.vue'\n\nexport default (options = {}, elId = 'search-engine', paginationElId = 'search-pagination') => {\n  const $searchEngine = document.getElementById(elId)\n  if ($searchEngine) {\n    const $dock = document.getElementById(`${elId}-dock`)\n    let $productItems\n    const getScopedSlots = window.storefront && window.storefront.getScopedSlots\n    const { dataset } = $searchEngine\n\n    const urlParams = new URLSearchParams(window.location.search)\n    const props = {\n      ...options.props,\n      term: urlParams.get('term'),\n      brands: urlParams.getAll('brands[]'),\n      categories: urlParams.getAll('categories[]'),\n      defaultFilters: urlParams.getAll('filters[]').reduce((filters, gridAndOption) => {\n        const [gridId, option] = gridAndOption.split(':')\n        if (!filters[gridId]) {\n          filters[gridId] = []\n        }\n        filters[gridId].push(option)\n        return filters\n      }, {}),\n      defaultSort: dataset.sort || urlParams.get('sort')\n    }\n\n    ;['brands', 'categories'].forEach(resource => {\n      if (dataset[resource]) {\n        try {\n          props[resource] = JSON.parse(dataset[resource])\n        } catch (err) {\n          console.error(err)\n          return\n        }\n        if (props[resource] && props[resource].length < 2) {\n          props[`isFixed${resource.charAt(0).toUpperCase()}${resource.slice(1)}`] = true\n        }\n        props.hasPopularItems = false\n      }\n    })\n\n    const { resource } = window.document.body.dataset\n    switch (resource) {\n      case 'brands':\n      case 'categories':\n        if (!props[resource] || !props[resource].length) {\n          console.error(new Error(`Skipping SearchEngine with empty '${resource}' filter`))\n          return\n        }\n    }\n\n    const pageTitle = document.title\n    const updatePageUrl = () => {\n      const term = urlParams.get('term')\n      let title = term ? `${term} ~ ${pageTitle}` : pageTitle\n      const page = urlParams.get('page')\n      if (page > 1) {\n        title += ` (${page}) `\n      }\n      if (window.history) {\n        const query = urlParams.toString()\n        const { pathname } = window.location\n        window.history.pushState({\n          pathname,\n          query\n        }, title, pathname + (query ? `?${query}` : ''))\n      }\n      document.title = title\n    }\n    updatePageUrl()\n\n    const vueApp = new Vue({\n      data: {\n        countRequests: 0,\n        canShowItems: !$dock,\n        term: props.term,\n        page: parseInt(urlParams.get('page'), 10) || 1,\n        totalItems: 0\n      },\n\n      render (createElement) {\n        const vm = this\n        if (options.pagination) {\n          import('#components/APagination.vue')\n            .then(pagination => {\n              new Vue({\n                render: h => h(pagination.default, {\n                  props: {\n                    totalItems: vm.totalItems,\n                    page: vm.page\n                  },\n                  on: {\n                    'update:page' (page) {\n                      vm.page = page\n                      urlParams.set('page', page)\n                      updatePageUrl()\n                      window.scroll({\n                        top: 0,\n                        behavior: 'smooth'\n                      })\n                    }\n                  }\n                })\n              }).$mount(document.getElementById(paginationElId))\n            })\n        }\n\n        return createElement(SearchEngine, {\n          attrs: {\n            id: $dock ? null : elId\n          },\n          props: {\n            ...props,\n            term: vm.term,\n            page: vm.page,\n            canLoadMore: !options.pagination && !dataset.disableLoadMore,\n            canShowItems: vm.canShowItems,\n            loadMoreSelector: $dock ? '#search-engine-load' : null,\n            isFilterable: !dataset.disableFilters\n          },\n\n          on: {\n            'update:term' (term) {\n              vm.term = term\n              urlParams.set('term', term)\n              updatePageUrl()\n            },\n\n            fetch ({ ecomSearch, fetching, isPopularItems }) {\n              fetching.then(result => {\n                if (!isPopularItems) {\n                  vm.totalItems = ecomSearch.getTotalCount()\n                }\n                if ($dock) {\n                  vm.countRequests++\n                  const renderNewItems = () => {\n                    vm.canShowItems = true\n                    $('#search-engine-snap').remove()\n                  }\n                  if (!vm.canShowItems) {\n                    if (vm.countRequests > 1) {\n                      renderNewItems()\n                    } else if (result && result.hits) {\n                      if (!$productItems || $productItems.length !== result.hits.hits.length) {\n                        renderNewItems()\n                      } else {\n                        let isSameItems = true\n                        const { hits } = result.hits\n                        for (let i = 0; i < hits.length; i++) {\n                          if (!$productItems.find(`[data-product-id=\"${hits[i]._id}\"]`).length) {\n                            isSameItems = false\n                            break\n                          }\n                        }\n                        if (!isSameItems) {\n                          renderNewItems()\n                        }\n                      }\n                    }\n                  }\n                }\n              })\n            }\n          },\n\n          scopedSlots: typeof getScopedSlots === 'function'\n            ? getScopedSlots($searchEngine, createElement, !$dock)\n            : undefined\n        })\n      }\n    })\n\n    if ($dock) {\n      $($searchEngine).append($('<div>', {\n        id: 'search-engine-load'\n      }))\n\n      const mount = () => vueApp.$mount($dock)\n      $productItems = $('#search-engine-snap .product-item')\n      if ($productItems.length) {\n        const observer = new window.MutationObserver(() => {\n          clearTimeout(fallbackTimer)\n          observer.disconnect()\n          setTimeout(mount, 150)\n        })\n        observer.observe($productItems[0], {\n          childList: true\n        })\n        const fallbackTimer = setTimeout(() => {\n          observer.disconnect()\n          mount()\n        }, 3000)\n      } else {\n        mount()\n      }\n    } else {\n      vueApp.$mount($searchEngine)\n    }\n  }\n}\n","\n/**\n * vue-simple-portal\n * version: 0.1.5,\n * (c) Thorsten LÃ¼nborg, 2021 - present\n * LICENCE: Apache-2.0\n * http://github.com/linusborg/vue-simple-portal\n*/\nimport Vue from 'vue';\nimport { nanoid } from 'nanoid/non-secure';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar config = {\n  selector: \"vue-portal-target-\".concat(nanoid())\n};\nvar setSelector = function setSelector(selector) {\n  return config.selector = selector;\n};\nvar isBrowser = typeof window !== 'undefined' && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) !== undefined;\n\nvar TargetContainer = Vue.extend({\n  // as an abstract component, it doesn't appear in\n  // the $parent chain of components.\n  // which means the next parent of any component rendered inside of this oen\n  // will be the parent from which is was sent\n  // @ts-expect-error\n  abstract: true,\n  name: 'PortalOutlet',\n  props: ['nodes', 'tag'],\n  data: function data(vm) {\n    return {\n      updatedNodes: vm.nodes\n    };\n  },\n  render: function render(h) {\n    var nodes = this.updatedNodes && this.updatedNodes();\n    if (!nodes) return h();\n    return nodes.length === 1 && !nodes[0].text ? nodes : h(this.tag || 'DIV', nodes);\n  },\n  destroyed: function destroyed() {\n    var el = this.$el;\n    el && el.parentNode.removeChild(el);\n  }\n});\n\nvar Portal = Vue.extend({\n  name: 'VueSimplePortal',\n  props: {\n    disabled: {\n      type: Boolean\n    },\n    prepend: {\n      type: Boolean\n    },\n    selector: {\n      type: String,\n      default: function _default() {\n        return \"#\".concat(config.selector);\n      }\n    },\n    tag: {\n      type: String,\n      default: 'DIV'\n    }\n  },\n  render: function render(h) {\n    if (this.disabled) {\n      var nodes = this.$scopedSlots && this.$scopedSlots.default();\n      if (!nodes) return h();\n      return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag, nodes);\n    }\n\n    return h();\n  },\n  created: function created() {\n    if (!this.getTargetEl()) {\n      this.insertTargetEl();\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    // We only update the target container component\n    // if the scoped slot function is a fresh one\n    // The new slot syntax (since Vue 2.6) can cache unchanged slot functions\n    // and we want to respect that here.\n    this.$nextTick(function () {\n      if (!_this.disabled && _this.slotFn !== _this.$scopedSlots.default) {\n        _this.container.updatedNodes = _this.$scopedSlots.default;\n      }\n\n      _this.slotFn = _this.$scopedSlots.default;\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.unmount();\n  },\n  watch: {\n    disabled: {\n      immediate: true,\n      handler: function handler(disabled) {\n        disabled ? this.unmount() : this.$nextTick(this.mount);\n      }\n    }\n  },\n  methods: {\n    // This returns the element into which the content should be mounted.\n    getTargetEl: function getTargetEl() {\n      if (!isBrowser) return;\n      return document.querySelector(this.selector);\n    },\n    insertTargetEl: function insertTargetEl() {\n      if (!isBrowser) return;\n      var parent = document.querySelector('body');\n      var child = document.createElement(this.tag);\n      child.id = this.selector.substring(1);\n      parent.appendChild(child);\n    },\n    mount: function mount() {\n      if (!isBrowser) return;\n      var targetEl = this.getTargetEl();\n      var el = document.createElement('DIV');\n\n      if (this.prepend && targetEl.firstChild) {\n        targetEl.insertBefore(el, targetEl.firstChild);\n      } else {\n        targetEl.appendChild(el);\n      }\n\n      this.container = new TargetContainer({\n        el: el,\n        parent: this,\n        propsData: {\n          tag: this.tag,\n          nodes: this.$scopedSlots.default\n        }\n      });\n    },\n    unmount: function unmount() {\n      if (this.container) {\n        this.container.$destroy();\n        delete this.container;\n      }\n    }\n  }\n});\n\nfunction install(_Vue) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  _Vue.component(options.name || 'portal', Portal);\n\n  if (options.defaultSelector) {\n    setSelector(options.defaultSelector);\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {\n  // plugin was inlcuded directly in a browser\n  Vue.use(install);\n}\n\nexport default install;\nexport { Portal, config, setSelector };\n","// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\nlet customAlphabet = (alphabet, size) => {\n  return () => {\n    let id = ''\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size\n    while (i--) {\n      // `| 0` is more compact and faster than `Math.floor()`.\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet }\n"],"sourceRoot":""}