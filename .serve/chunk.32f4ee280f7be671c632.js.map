{"version":3,"sources":["webpack:///./node_modules/@confere-stores/storefront-components/src/ProductCard.vue","webpack:///./node_modules/@confere-stores/storefront-components/src/html/ProductCard.html","webpack:///./node_modules/@confere-stores/storefront-components/src/js/ProductCard.js","webpack:///./node_modules/@confere-stores/storefront-components/src/js/ProductCard.js?b021","webpack:///./node_modules/@confere-stores/storefront-components/src/html/ProductCard.html?022f"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0G;AACzC;AACL;AACkB;;;AAG9E;AACgF;AAChF,gBAAgB,8FAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKuB;;AAQC;;AAEH;AACmB;AACM;AACd;AACM;AACF;;AAEpC;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;;AAEA;AACA,IAAI,yDAAK;AACT,IAAI,+DAAQ;AACZ,IAAI,6DAAO;AACX,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,yBAAyB,4DAAI,CAAC,4DAAa;AAC3C,0BAA0B,4DAAI,CAAC,6DAAc;;AAE7C;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,4DAAO;AACpB,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,4DAAI,CAAC,qDAAM;AACnB,KAAK;;AAEL;AACA,aAAa,+DAAY;AACzB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,OAAO;AACpB,aAAa,mEAAgB;AAC7B,yCAAyC,6DAAQ;AACjD;AACA;AACA,GAAG;;AAEH;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,8DAAK,EAAE,mBAAmB,eAAe,QAAQ;AACzD,kBAAkB,OAAO;AACzB;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,2BAA2B,4DAAI,CAAC,2EAA4B;AAC5D;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA,KAAK;;AAEL;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA,QAAQ,8DAAK,EAAE,mBAAmB,YAAY,QAAQ;AACtD,kBAAkB,OAAO;AACzB;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA,uBAAuB,oTAAiC;AACxD;AACA,wBAAwB,2CAAG;AAC3B;AACA;AACA;AACA;AACA,uBAAuB;AACvB,qBAAqB;AACrB,mBAAmB;AACnB;AACA;AACA,mBAAmB,kBAAkB;AACrC,YAAY,+DAAQ,aAAa,8BAA8B;AAC/D,WAAW;AACX;AACA;AACA,kCAAkC,aAAa;AAC/C,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACvMD;AAAA;AAAA,wCAA8D,CAAgB,+IAAG,EAAC,C;;;;;;;;;;;;ACAlF;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,cAAc,4DAA4D;AAC1E;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS,SAAS,4CAA4C,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2CAA2C;AACxE;AACA,uCAAuC,mCAAmC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAwC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qCAAqC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kCAAkC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,yCAAyC;AACzC;AACA;AACA;AACA,6CAA6C,yBAAyB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,2BAA2B;AACzC,iBAAiB;AACjB,KAAK;AACL;AACA;AACA","file":"chunk.32f4ee280f7be671c632.js","sourcesContent":["import { render, staticRenderFns } from \"./html/ProductCard.html?vue&type=template&id=6f01aef6&lang=html&\"\nimport script from \"./js/ProductCard.js?vue&type=script&lang=js&\"\nexport * from \"./js/ProductCard.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/ProductCard.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/jescudero/ConfereCartoes/@confere-stores/storefront-template/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6f01aef6')) {\n      api.createRecord('6f01aef6', component.options)\n    } else {\n      api.reload('6f01aef6', component.options)\n    }\n    module.hot.accept(\"./html/ProductCard.html?vue&type=template&id=6f01aef6&lang=html&\", function () {\n      api.rerender('6f01aef6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"node_modules/@confere-stores/storefront-components/src/ProductCard.vue\"\nexport default component.exports","export * from \"-!../../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./ProductCard.html?vue&type=template&id=6f01aef6&lang=html&\"","import {\n  i19buy,\n  i19connectionErrorProductMsg,\n  i19outOfStock,\n  i19unavailable\n} from '@ecomplus/i18n'\n\nimport {\n  i18n,\n  name as getName,\n  inStock as checkInStock,\n  onPromotion as checkOnPromotion,\n  price as getPrice\n} from '@ecomplus/utils'\n\nimport Vue from 'vue'\nimport { store } from '@ecomplus/client'\nimport ecomCart from '@ecomplus/shopping-cart'\nimport ALink from '../ALink.vue'\nimport APicture from '../APicture.vue'\nimport APrices from '../APrices.vue'\n\nconst getExternalHtml = (varName, product) => {\n  if (typeof window === 'object') {\n    varName = `productCard${varName}Html`\n    const html = typeof window[varName] === 'function'\n      ? window[varName](product)\n      : window[varName]\n    if (typeof html === 'string') {\n      return html\n    }\n  }\n  return undefined\n}\n\nexport default {\n  name: 'ProductCard',\n\n  components: {\n    ALink,\n    APicture,\n    APrices\n  },\n\n  props: {\n    product: Object,\n    productId: String,\n    isSmall: Boolean,\n    headingTag: {\n      type: String,\n      default: 'h3'\n    },\n    buyText: String,\n    transitionClass: {\n      type: String,\n      default: 'animated fadeIn'\n    },\n    canAddToCart: {\n      type: Boolean,\n      default: true\n    },\n    isLoaded: Boolean,\n    installmentsOption: Object,\n    discountOption: Object\n  },\n\n  data () {\n    return {\n      body: {},\n      isLoading: false,\n      isWaitingBuy: false,\n      isHovered: false,\n      error: ''\n    }\n  },\n\n  computed: {\n    i19outOfStock: () => i18n(i19outOfStock),\n    i19unavailable: () => i18n(i19unavailable),\n\n    ratingHtml () {\n      return getExternalHtml('Rating', this.body)\n    },\n\n    buyHtml () {\n      return getExternalHtml('Buy', this.body)\n    },\n\n    footerHtml () {\n      return getExternalHtml('Footer', this.body)\n    },\n\n    name () {\n      return getName(this.body)\n    },\n\n    strBuy () {\n      return this.buyText ||\n        (typeof window === 'object' && window.productCardBuyText) ||\n        i18n(i19buy)\n    },\n\n    isInStock () {\n      return checkInStock(this.body)\n    },\n\n    isActive () {\n      return this.body.available && this.body.visible && this.isInStock\n    },\n\n    discount () {\n      const { body } = this\n      return checkOnPromotion(body)\n        ? Math.round(((body.base_price - getPrice(body)) * 100) / body.base_price)\n        : 0\n    }\n  },\n\n  methods: {\n    setBody (data) {\n      this.body = Object.assign({}, data)\n      delete this.body.body_html\n      delete this.body.body_text\n      delete this.body.inventory_records\n      delete this.body.price_change_records\n    },\n\n    fetchItem () {\n      if (this.productId) {\n        this.isLoading = true\n        store({ url: `/products/${this.productId}.json` })\n          .then(({ data }) => {\n            this.$emit('update:product', data)\n            this.setBody(data)\n            this.$emit('update:is-loaded', true)\n          })\n          .catch(err => {\n            console.error(err)\n            if (!this.body.name || !this.body.slug || !this.body.pictures) {\n              this.error = i18n(i19connectionErrorProductMsg)\n            }\n          })\n          .finally(() => {\n            this.isLoading = false\n          })\n      }\n    },\n\n    buy () {\n      const product = this.body\n      this.$emit('buy', { product })\n      if (this.canAddToCart) {\n        this.isWaitingBuy = true\n        store({ url: `/products/${product._id}.json` })\n          .then(({ data }) => {\n            const selectFields = ['variations', 'customizations', 'kit_composition']\n            for (let i = 0; i < selectFields.length; i++) {\n              const selectOptions = data[selectFields[i]]\n              if (selectOptions && selectOptions.length) {\n                return import('../ProductQuickview.vue')\n                  .then(quickview => {\n                    new Vue({\n                      render: h => h(quickview.default, {\n                        props: {\n                          product: data\n                        }\n                      })\n                    }).$mount(this.$refs.quickview)\n                  })\n              }\n            }\n            const { quantity, price } = data\n            ecomCart.addProduct({ ...product, quantity, price })\n          })\n          .catch(err => {\n            console.error(err)\n            window.location = `/${product.slug}`\n          })\n          .finally(() => {\n            this.isWaitingBuy = false\n          })\n      }\n    }\n  },\n\n  created () {\n    if (this.product) {\n      this.setBody(this.product)\n      if (this.product.available === undefined) {\n        this.body.available = true\n      }\n      if (this.product.visible === undefined) {\n        this.body.visible = true\n      }\n    }\n    if (!this.isLoaded) {\n      this.fetchItem()\n    }\n  }\n}\n","import mod from \"-!./ProductCard.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./ProductCard.js?vue&type=script&lang=js&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"product-card\",\n      class: {\n        \"product-card--inactive\": _vm.body._id && !_vm.isActive,\n        \"product-card--small\": _vm.isSmall\n      },\n      attrs: { \"data-product-id\": _vm.body._id, \"data-sku\": _vm.body.sku },\n      on: {\n        mouseover: function($event) {\n          _vm.isHovered = true\n        }\n      }\n    },\n    [\n      _c(\n        \"transition\",\n        { attrs: { \"enter-active-class\": _vm.transitionClass } },\n        [\n          !_vm.isLoading\n            ? _c(\n                \"section\",\n                [\n                  _vm._t(\n                    \"discount-tag\",\n                    [\n                      _vm.isActive && _vm.discount > 0\n                        ? _c(\n                            \"span\",\n                            { staticClass: \"product-card__offer-stamp\" },\n                            [\n                              _c(\"i\", { staticClass: \"fas fa-arrow-down\" }),\n                              _vm._v(\" \"),\n                              _c(\"b\", [_vm._v(_vm._s(_vm.discount))]),\n                              _vm._v(\"%\\n        \")\n                            ]\n                          )\n                        : _vm._e()\n                    ],\n                    null,\n                    { discount: _vm.discount }\n                  ),\n                  _vm._v(\" \"),\n                  _vm._t(\"body\", [\n                    _c(\n                      \"a-link\",\n                      {\n                        staticClass: \"product-card__link\",\n                        attrs: { href: \"/\" + _vm.body.slug, title: _vm.name }\n                      },\n                      [\n                        _vm._t(\"header\"),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          { staticClass: \"product-card__pictures\" },\n                          [\n                            _vm.body.pictures && _vm.body.pictures.length\n                              ? _vm._l(\n                                  _vm.body.pictures.slice(0, 2).reverse(),\n                                  function(picture, index) {\n                                    return _vm.body.pictures.length === 1 ||\n                                      index === 1 ||\n                                      _vm.isHovered\n                                      ? _c(\"a-picture\", {\n                                          key: index,\n                                          staticClass: \"product-card__picture\",\n                                          attrs: {\n                                            src: picture,\n                                            \"can-calc-height\": false\n                                          }\n                                        })\n                                      : _vm._e()\n                                  }\n                                )\n                              : _c(\"a-picture\", {\n                                  staticClass: \"product-card__picture\"\n                                })\n                          ],\n                          2\n                        ),\n                        _vm._v(\" \"),\n                        _vm._t(\"title\", [\n                          _c(\n                            _vm.headingTag,\n                            {\n                              tag: \"component\",\n                              staticClass: \"product-card__name\"\n                            },\n                            [\n                              _vm._v(\n                                \"\\n              \" +\n                                  _vm._s(_vm.name) +\n                                  \"\\n            \"\n                              )\n                            ]\n                          )\n                        ])\n                      ],\n                      2\n                    )\n                  ]),\n                  _vm._v(\" \"),\n                  _vm._t(\"rating\", [_vm._m(0)]),\n                  _vm._v(\" \"),\n                  !_vm.body.available || !_vm.body.visible\n                    ? _vm._t(\"unavailable\", [\n                        _c(\"p\", { staticClass: \"badge badge-warning\" }, [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.i19unavailable) +\n                              \"\\n        \"\n                          )\n                        ])\n                      ])\n                    : !_vm.isInStock\n                    ? _vm._t(\"out-of-stock\", [\n                        _c(\"p\", { staticClass: \"badge badge-dark\" }, [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.i19outOfStock) +\n                              \"\\n        \"\n                          )\n                        ])\n                      ])\n                    : [\n                        _vm._t(\"prices\", [\n                          _c(\"a-prices\", {\n                            staticClass: \"product-card__prices\",\n                            attrs: {\n                              product: _vm.body,\n                              \"installments-option\": _vm.installmentsOption,\n                              \"discount-option\": _vm.discountOption\n                            }\n                          })\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          {\n                            staticClass: \"product-card__buy fade\",\n                            on: { click: _vm.buy }\n                          },\n                          [\n                            _vm._t(\"buy\", [\n                              _vm.buyHtml\n                                ? _c(\"div\", {\n                                    domProps: { innerHTML: _vm._s(_vm.buyHtml) }\n                                  })\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              _c(\n                                \"button\",\n                                {\n                                  staticClass: \"btn btn-primary\",\n                                  class: _vm.isSmall ? \"btn-sm\" : \"btn-block\",\n                                  attrs: {\n                                    type: \"button\",\n                                    disabled: _vm.isWaitingBuy\n                                  }\n                                },\n                                [\n                                  _vm.isWaitingBuy\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          staticClass:\n                                            \"product-card__buy-loading spinner-grow spinner-grow-sm\",\n                                          attrs: { role: \"status\" }\n                                        },\n                                        [\n                                          _c(\n                                            \"span\",\n                                            { staticClass: \"sr-only\" },\n                                            [_vm._v(\"Loading...\")]\n                                          )\n                                        ]\n                                      )\n                                    : _vm._e(),\n                                  _vm._v(\" \"),\n                                  _vm._t(\"buy-button-content\", [\n                                    _c(\"i\", {\n                                      staticClass: \"fas fa-shopping-bag mr-1\"\n                                    }),\n                                    _vm._v(\n                                      \"\\n                \" +\n                                        _vm._s(_vm.strBuy) +\n                                        \"\\n              \"\n                                    )\n                                  ])\n                                ],\n                                2\n                              )\n                            ])\n                          ],\n                          2\n                        )\n                      ],\n                  _vm._v(\" \"),\n                  _vm._t(\"footer\", [\n                    _vm.footerHtml\n                      ? _c(\"div\", {\n                          domProps: { innerHTML: _vm._s(_vm.footerHtml) }\n                        })\n                      : _vm._e()\n                  ])\n                ],\n                2\n              )\n            : _vm._e()\n        ]\n      ),\n      _vm._v(\" \"),\n      _vm.isLoading\n        ? [\n            _vm._t(\"default\"),\n            _vm._v(\" \"),\n            _vm.error\n              ? _c(\n                  \"div\",\n                  {\n                    staticClass: \"alert alert-warning small\",\n                    attrs: { role: \"alert\" }\n                  },\n                  [_vm._v(\"\\n      \" + _vm._s(_vm.error) + \"\\n    \")]\n                )\n              : _vm._e()\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", { ref: \"quickview\" })\n    ],\n    2\n  )\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", {\n      staticClass: \"product-card__rating\",\n      attrs: { \"data-sku\": _vm.body.sku },\n      domProps: { innerHTML: _vm._s(_vm.ratingHtml) }\n    })\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}