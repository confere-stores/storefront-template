{"version":3,"sources":["webpack:///./template/js/lib/fallback-404.js"],"names":["$fallback404","$","length","urlParams","URLSearchParams","window","location","search","url","get","router","EcomRouter","html","renderNotFound","class","i18n","pt_br","en_us","list","then","routes","append","map","path","catch","console","error","route","resource","_id","Vue","render","h","TheProduct","props","productId","resolve","body","SearchEngine","name","vueInstance","$mount","err"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,YAAY,GAAGC,mEAAC,CAAC,eAAD,CAAtB;;AACA,IAAID,YAAY,CAACE,MAAjB,EAAyB;AACvB,QAAMC,SAAS,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAlB;AACA,QAAMC,GAAG,GAAGL,SAAS,CAACM,GAAV,CAAc,KAAd,CAAZ;;AACA,MAAID,GAAJ,EAAS;AACP,UAAME,MAAM,GAAG,IAAIC,mEAAJ,EAAf;AACAX,gBAAY,CAACY,IAAb,CAAkB,kDAAlB;;AAEA,UAAMC,cAAc,GAAG,MAAM;AAC3Bb,kBAAY,CAACY,IAAb,CAAkBX,mEAAC,CAAC,MAAD,EAAS;AAC1Ba,aAAK,EAAE,MADmB;AAE1BF,YAAI,EAAE,CACJ,6DADI,EAEJG,4DAAI,CAAC;AACHC,eAAK,EAAE,uBADJ;AAEHC,eAAK,EAAE;AAFJ,SAAD,CAFA;AAFoB,OAAT,CAAnB;AAWAP,YAAM,CAACQ,IAAP,GACGC,IADH,CACQC,MAAM,IAAI;AACdpB,oBAAY,CAACqB,MAAb,CAAoB,CAClBpB,mEAAC,CAAC,KAAD,EAAQ;AACPa,eAAK,EAAE,MADA;AAEPF,cAAI,EAAEG,4DAAI,CAAC;AACTC,iBAAK,EAAE,eADE;AAETC,iBAAK,EAAE;AAFE,WAAD;AAFH,SAAR,CADiB,EAQlBhB,mEAAC,CAAC,MAAD,EAAS;AACRW,cAAI,EAAEQ,MAAM,CAACE,GAAP,CAAW,CAAC;AAAEC;AAAF,WAAD,KAAc;AAC7B,mBAAQ,gBAAeA,IAAK,KAAIA,IAAK,WAArC;AACD,WAFK;AADE,SAAT,CARiB,CAApB;AAcD,OAhBH,EAiBGC,KAjBH,CAiBSC,OAAO,CAACC,KAjBjB;AAkBD,KA9BD;;AAgCAhB,UAAM,CAACY,GAAP,CAAWd,GAAX,EACGW,IADH,CACQQ,KAAK,IAAI;AACb,YAAM;AAAEC,gBAAF;AAAYC;AAAZ,UAAoBF,KAA1B;;AACA,cAAQC,QAAR;AACE,aAAK,UAAL;AACE,iBAAO,IAAIE,2CAAJ,CAAQ;AACbC,kBAAM,EAAEC,CAAC,IAAIA,CAAC,CAACC,kEAAD,EAAa;AACzBC,mBAAK,EAAE;AACLC,yBAAS,EAAEN;AADN;AADkB,aAAb;AADD,WAAR,CAAP;;AAQF,aAAK,QAAL;AACA,aAAK,YAAL;AACE,iBAAOnB,MAAM,CAAC0B,OAAP,CAAeT,KAAf,EACJR,IADI,CACC,CAAC;AAAEkB;AAAF,WAAD,KAAc;AAClB,mBAAO,IAAIP,2CAAJ,CAAQ;AACbC,oBAAM,EAAEC,CAAC,IAAIA,CAAC,CAACM,oEAAD,EAAe;AAC3BJ,qBAAK,EAAE;AACL,mBAACN,QAAD,GAAY,CAACS,IAAI,CAACE,IAAN;AADP;AADoB,eAAf;AADD,aAAR,CAAP;AAOD,WATI,CAAP;AAZJ;AAuBD,KA1BH,EA4BGpB,IA5BH,CA4BQqB,WAAW,IAAI;AACnB,UAAIA,WAAJ,EAAiB;AACfA,mBAAW,CAACC,MAAZ,CAAmBzC,YAAY,CAAC,CAAD,CAA/B;AACD,OAFD,MAEO;AACLa,sBAAc;AACf;AACF,KAlCH,EAoCGW,KApCH,CAoCSkB,GAAG,IAAI;AACZjB,aAAO,CAACC,KAAR,CAAcgB,GAAd;AACA7B,oBAAc;AACf,KAvCH;AAwCD;AACF,C","file":"chunk.079c6ce510ee1a09eec1.js","sourcesContent":["import { i18n } from '@ecomplus/utils'\nimport EcomRouter from '@ecomplus/storefront-router'\nimport { $ } from '@ecomplus/storefront-twbs'\nimport Vue from 'vue'\nimport TheProduct from '#components/TheProduct.vue'\nimport SearchEngine from '#components/SearchEngine.vue'\n\nconst $fallback404 = $('#fallback-404')\nif ($fallback404.length) {\n  const urlParams = new URLSearchParams(window.location.search)\n  const url = urlParams.get('url')\n  if (url) {\n    const router = new EcomRouter()\n    $fallback404.html('<div class=\"spinner-border\" role=\"status\"></div>')\n\n    const renderNotFound = () => {\n      $fallback404.html($('<h3>', {\n        class: 'my-4',\n        html: [\n          '<i class=\"text-muted fas fa-exclamation-triangle mr-3\"></i>',\n          i18n({\n            pt_br: 'Página não encontrada',\n            en_us: 'Page not found'\n          })\n        ]\n      }))\n\n      router.list()\n        .then(routes => {\n          $fallback404.append([\n            $('<p>', {\n              class: 'lead',\n              html: i18n({\n                pt_br: 'Mapa do site:',\n                en_us: 'Sitemap:'\n              })\n            }),\n            $('<ul>', {\n              html: routes.map(({ path }) => {\n                return `<li><a href=\"${path}\">${path}</a></li>`\n              })\n            })\n          ])\n        })\n        .catch(console.error)\n    }\n\n    router.map(url)\n      .then(route => {\n        const { resource, _id } = route\n        switch (resource) {\n          case 'products':\n            return new Vue({\n              render: h => h(TheProduct, {\n                props: {\n                  productId: _id\n                }\n              })\n            })\n\n          case 'brands':\n          case 'categories':\n            return router.resolve(route)\n              .then(({ body }) => {\n                return new Vue({\n                  render: h => h(SearchEngine, {\n                    props: {\n                      [resource]: [body.name]\n                    }\n                  })\n                })\n              })\n        }\n      })\n\n      .then(vueInstance => {\n        if (vueInstance) {\n          vueInstance.$mount($fallback404[0])\n        } else {\n          renderNotFound()\n        }\n      })\n\n      .catch(err => {\n        console.error(err)\n        renderNotFound()\n      })\n  }\n}\n"],"sourceRoot":""}